@use "$style/scss/mixins/index" as *;

// Define theme variables for light mode
@mixin light-theme {
  /**
   * Theme-able variables
   */
  --color-shadow: var(--shade-800);

  --color-foreground: var(--shade-920);
  --color-background: var(--shade-10);

  --color-text-primary: var(--shade-800);
  --color-text-secondary: var(--shade-500);

  /**
   * Navbar
   */
  --color-background-navbar: color-mix(in srgb,
      var(--shade-50) 80%,
      transparent);
  --color-foreground-navbar: var(--color-foreground);
  --color-border: var(--shade-300);

  /*
   * Card
   */
  --color-card-background: var(--shade-20);
  --color-official-list-background: var(--purple-200);
  --list-poster-shadow: -4px 0px 16px 0px rgba(0, 0, 0, 0.25);
  --card-shadow: linear-gradient(180deg,
      transparent 0%,
      color-mix(in srgb,
        var(--color-card-background) 7%,
        color-mix(in srgb, var(--color-shadow) 7%, transparent 93%)) 13%,
      color-mix(in srgb,
        var(--color-card-background) 18%,
        color-mix(in srgb, var(--color-shadow) 18%, transparent 82%)) 24%,
      color-mix(in srgb,
        var(--color-card-background) 29%,
        color-mix(in srgb, var(--color-shadow) 29%, transparent 71%)) 34%,
      color-mix(in srgb,
        var(--color-card-background) 43%,
        color-mix(in srgb, var(--color-shadow) 43%, transparent 57%)) 46%,
      color-mix(in srgb,
        var(--color-card-background) 62%,
        color-mix(in srgb, var(--color-shadow) 62%, transparent 38%)) 63%,
      color-mix(in srgb,
        var(--color-card-background) 86%,
        color-mix(in srgb, var(--color-shadow) 86%, transparent 14%)) 86%,
      var(--color-card-background) 100%);

  /*
   * List
   */
  --list-shadow: radial-gradient(50% 50% at 50% 50%,
      color-mix(in srgb, var(--color-shadow) 86%, transparent) 0%,
      color-mix(in srgb, var(--color-shadow) 62%, transparent) 24%,
      color-mix(in srgb, var(--color-shadow) 43%, transparent) 34%,
      color-mix(in srgb, var(--color-shadow) 29%, transparent) 46%,
      color-mix(in srgb, var(--color-shadow) 18%, transparent) 63%,
      color-mix(in srgb, var(--color-shadow) 7%, transparent) 86%,
      transparent 100%);

  /*
   * Button
   */
  --color-surface-button-disabled: var(--shade-200);
  --color-foreground-button-disabled: var(--shade-600);

  /*
   * Link
   */
  --color-link-active: var(--purple-700);

  /*
   * Navbar
   */
  --color-background-mobile-navbar: color-mix(in srgb,
      var(--shade-30) 90%,
      transparent 10%);

  /*
   * Tooltip
   */
  --color-tooltip-background: var(--shade-10);
  --color-tooltip-text: var(--shade-800);

  /**
   * Sentiments
   */
  --color-text-sentiment-good: var(--purple-700);
  --color-text-sentiment-bad: var(--red-700);

  /*
  * Overrides
  */
  .trakt-cover-image {
    opacity: 0.25;
  }

  /**
   * Now playing
   */
  --color-now-playing-background: color-mix(in srgb, var(--shade-100) 70%, transparent 30%);
  --color-now-playing-border: var(--shade-200);
  --color-now-playing-progress-bar-background: var(--shade-300);
  --color-now-playing-progress-bar-progress: var(--shade-500);
  --color-now-playing-progress-bar-shadow: var(--shade-400);

  /**
   * Cookie
   */
  --color-cookie-border: var(--shade-100);
}

// Define theme variables for dark mode
@mixin dark-theme {
  --color-shadow: var(--shade-940);

  --color-foreground: var(--shade-10);
  --color-background: var(--shade-940);

  --color-text-primary: var(--shade-10);
  --color-text-secondary: var(--shade-300);

  /**
   * Navbar
   */
  --color-background-navbar: color-mix(in srgb,
      var(--shade-920) 90%,
      transparent 10%);
  --color-foreground-navbar: var(--shade-10);
  --color-border: var(--shade-700);

  /*
   * Card
   */
  --color-card-background: var(--shade-920);
  --color-official-list-background: var(--purple-800);
  --list-poster-shadow: -8px 0px 16px 0px rgba(0, 0, 0, 0.56);
  --card-shadow: linear-gradient(180deg,
      transparent 0%,
      color-mix(in srgb, var(--color-card-background) 7%, transparent 93%) 13%,
      color-mix(in srgb, var(--color-card-background) 18%, transparent 82%) 24%,
      color-mix(in srgb, var(--color-card-background) 29%, transparent 71%) 34%,
      color-mix(in srgb, var(--color-card-background) 43%, transparent 57%) 46%,
      color-mix(in srgb, var(--color-card-background) 62%, transparent 38%) 63%,
      color-mix(in srgb, var(--color-card-background) 86%, transparent 14%) 86%,
      var(--color-card-background) 100%);

  /*
   * List
   */
  --list-shadow: radial-gradient(50% 50% at 50% 50%,
      color-mix(in srgb, var(--color-shadow) 90%, transparent) 0%,
      color-mix(in srgb, var(--color-shadow) 45%, transparent) 32%,
      color-mix(in srgb, var(--color-shadow) 30%, transparent) 61%,
      color-mix(in srgb, var(--color-shadow) 25%, transparent) 80%,
      transparent 100%);

  /*
   * Button
   */
  --color-surface-button-disabled: var(--shade-800);
  --color-foreground-button-disabled: var(--shade-400);

  /**
   * Link
   */
  --color-link-active: var(--purple-400);

  /*
   * Navbar
   */
  --color-background-mobile-navbar: var(--color-background-navbar);

  /*
   * Tooltip
   */
  --color-tooltip-background: var(--shade-800);
  --color-tooltip-text: var(--shade-10);

  /**
   * Tags
   */
  --color-text-time-tag: var(--shade-800);
  --color-background-time-tag: var(--shade-10);

  --color-text-duration-tag: var(--shade-800);
  --color-background-duration-tag: var(--shade-10);

  /**
   * Sentiments
   */
  --color-text-sentiment-good: var(--purple-100);
  --color-text-sentiment-bad: var(--red-100);

  /**
   * Now playing
   */
  --color-now-playing-background: color-mix(in srgb, var(--shade-900) 70%, transparent 30%);
  --color-now-playing-border: var(--shade-700);
  --color-now-playing-progress-bar-background: var(--shade-500);
  --color-now-playing-progress-bar-progress: var(--shade-200);
  --color-now-playing-progress-bar-shadow: var(--shade-400);

  /**
   * Cookie
   */
  --color-cookie-border: var(--shade-700);
}

// Apply themes to selectors
[data-theme='light'] {
  @include light-theme();
}

[data-theme='dark'] {
  @include dark-theme();
}

[data-theme='system'] {
  @media (prefers-color-scheme: light) {
    @include light-theme();
  }

  @media (prefers-color-scheme: dark) {
    @include dark-theme();
  }
}

// For pages that show OG content in an iframe
[data-theme='light'],
[data-theme='dark'],
[data-theme='system'] {
  &:has(.trakt-og-frame) {
    @include dark-theme();

    --color-background: rgb(24, 23, 29);

    .trakt-background-cover-image {
      display: none;
    }
  }
}
